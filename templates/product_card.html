{% load static %}
 

<div class="col-6 col-md-3 col-lg-2 col-xl-2 mb-3">
    <div class="card h-100">

        <!-- Sale badge-->
        {% if products.offer_price != None %}

        {% if products.offer_price != 0 %}
        <div class="badge bg-dark text-white position-absolute" style="top: 0.5rem; right: 0.5rem">
            SALE
        </div>
        {% endif %}
        
        {% endif %}

        <!-- Product image-->
        <img class="card-img-top product_image" src="{{products.product_image.url}}" alt="..." />
        <!-- Product details-->
        <div class="card-body ">
            <div class="text-center">
                <!-- Product name-->
                
                <h5 class="fw-bolder product_title">{{products.product_title}}</h5>
                <!-- Product reviews-->

                {% if products.AverageRating < 1 %}
                <div class="d-flex justify-content-center small text-warning mb-2">
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>  
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>
                    <span style="color: black;">({{products.countReview}})</span>
                </div>

                {% elif products.AverageRating < 2 %}
                <div class="d-flex justify-content-center small text-warning mb-2">
                    <div class="bi-star-fill"></div>
                    <div class="bi-star"></div>  
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>
                    <span style="color: black;">({{products.countReview}})</span>
                </div>

                {% elif products.AverageRating < 3 %}
                <div class="d-flex justify-content-center small text-warning mb-2">
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>  
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>
                    <span style="color: black;">({{products.countReview}})</span>
                </div>

                {% elif products.AverageRating < 4 %}
                <div class="d-flex justify-content-center small text-warning mb-2">
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>  
                    <div class="bi-star-fill"></div>
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>
                    <span style="color: black;">({{products.countReview}})</span>
                </div>

                {% elif products.AverageRating < 5 %}
                <div class="d-flex justify-content-center small text-warning mb-2">
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>  
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>
                    <div class="bi-star"></div>
                    <span style="color: black;">({{products.countReview}})</span>
                </div>

                {% else %}
                <div class="d-flex justify-content-center small text-warning mb-2">
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>  
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>
                    <span style="color: black;">({{products.countReview}})</span>
                </div>

                {% endif %}


                
                <!-- Product price-->
                {% if products.offer_price != None and products.offer_price != 0 %}

                <span class="text-muted text-decoration-line-through">৳{{ products.product_price }}</span>
                ৳{{ products.offer_price }}

                {% else %}
                ৳{{ products.product_price }}

                {% endif %}
                

                {% if products.total_stock %}
                <span style="color: green; font-size: 13px;" class="d-block mt-2 poppins_font"><b>Only {{products.total_stock}} left</b></span>
                {% else %}
                <span style="color: red; font-size: 13px;" class="d-block mt-2 poppins_font"><b>stock out</b></span>
                {% endif %}


                
            </div>
        </div>
        <!-- Product actions-->
        <div class="card-footer pb-4 border-top-0 bg-transparent" style="font-size: 10px !important;">
            {% if request.user.is_authenticated and products.user != request.user and user.account_type == None  %}
            <div class="text-center">
                <a class="btn btn-outline-dark mt-auto add_cart_quick_view_btn" href="{% url 'Order' quick_view_id=products.id %}">Buy Now</a>
            </div>

            {% else %}
            <div class="text-center">
                <a class="disabled btn btn-outline-dark mt-auto add_cart_quick_view_btn" href="{% url 'Order' quick_view_id=products.id %}">Buy Now</a>
            </div>
            {% endif %}
            <div class="text-center mt-2">
                <a class="btn btn-outline-dark mt-auto add_cart_quick_view_btn" href="{% url 'quick_view' quick_view_id=products.id %}">Quick view</a>
            </div>
        </div>
    </div>
</div>


